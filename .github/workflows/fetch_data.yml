name: Fetch Boat Race Data

on:
  schedule:
    - cron: "0 22 * * *"  # æ—¥æœ¬æ™‚é–“7:00é ƒå®Ÿè¡Œ
  workflow_dispatch:

jobs:
  fetch:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ ãƒªãƒã‚¸ãƒˆãƒªã‚’å–å¾—
        uses: actions/checkout@v3

      - name: ğŸ Pythonã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        uses: actions/setup-python@v4
        with:
          python-version: "3.11"

      - name: ğŸ“¦ ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: |
          pip install requests beautifulsoup4

      - name: ğŸš€ ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦æ›´æ–°
        run: |
          python fetch_data.py

      - name: ğŸ’¾ å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦ãƒ—ãƒƒã‚·ãƒ¥
        run: |
          git config --local user.email "actions@github.com"
          git config --local user.name "github-actions[bot]"
          git add data.json history.json features.csv || true
          git commit -m "Auto-update race data" || echo "No changes to commit"
          git push